name: Push Main

on:
  push:
    branches:
    - main

permissions:
  contents: "read"
  id-token: "write"

jobs:
  Test:
    uses: ./.github/workflows/action-test.yml
  OIDC:
    uses: ./.github/workflows/action-oidc.yml
  Lint:
    uses: ./.github/workflows/action-lint.yml
  SBOM:
    uses: ./.github/workflows/action-sbom.yml
  Typecheck:
    uses: ./.github/workflows/action-typecheck.yml
  E2E:
    # TODO: Resolve IdP and configuration. Currently locally using Keycloak instance.
    if: false
    uses: ./.github/workflows/action-e2e.yml
    needs: [Test]
